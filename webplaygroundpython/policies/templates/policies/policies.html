{% extends 'core/base.html' %}
{% load static %}
{% block title %}Pólizas{% endblock %}

{% block content %}

{% load policies_extras %}

<main role="main">
    <div class="container mb-4 h-25">
        <div class="mt-4">
            <form action="" method="get">
                {% csrf_token %}
                <div class="row my-3">
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_policy_code">Número Póliza:</label>
                                {{filter.form.policy_code}}
                                
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_status">Estado Póliza:</label>
                                {{filter.form.status}}
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_owner">Titular</label>
                                {{filter.form.owner}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row my-3">
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_created">Fecha Alta:</label>
                                {{filter.form.created}}
                                
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_suspension_date">Fecha Suspensión:</label>
                                {{filter.form.suspension_date}}
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-outline">
                            <p>
                                <label for="id_cancellation_date">Fecha Cancelación:</label>
                                {{filter.form.cancellation_date}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center">
                    <input class="btn btn-primary btn-block" type="submit" value="Buscar" />
                </div>
            </form>
        </div>
    </div>
   

    <div class="container mb-4">
        <div class="mt-4">
            <table class="table table-bordered text-center" style="zoom:70%">
                <thead>
                  <tr>
                    <th scope="col">Número Póliza</th>
                    <th scope="col">Estado Póliza</th>
                    <th scope="col">Titular</th>
                    <th scope="col">Fecha Alta</th>
                    <th scope="col">Fecha Cancelación</th>
                    <th scope="col">Fecha Suspensión</th>
                    <th scope="col">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                {% for policy in policy_list %}
                    <tr class="text-center">
                        <td>{{policy.policy_code}}</td>
                        <td>{{policy.status.name}}</td>
                        <td>{{policy.owner.username}}</td>
                        <td>{{policy.created|date:"SHORT_DATE_FORMAT" }}</td>
                        <td>{{policy.cancellation_date|date:"SHORT_DATE_FORMAT" }}</td>
                        <td>{{policy.suspension_date|date:"SHORT_DATE_FORMAT" }}</td>
                        <td>
                          <a href="#"><i style="zoom:150%" class="fa-solid fa-circle-info mr-2"></i></a>
                          <a href="#"><i style="zoom:150%" class="fa-solid fa-pen-to-square"></i></a>
                          <a href="#"><i style="zoom:150%" class="fa-regular fa-trash-can ml-2"></i></a>
                        </td>
                      </tr>
                {% endfor %}

                </tbody>
              </table>
        </div>
    </div>
        <!-- Menú de paginación -->
{% if is_paginated %}
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item ">
        
        <a class="page-link" href="{% relative_url page_obj.previous_page_number 'page' request.GET.urlencode %}">&laquo;</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1">&laquo;</a>
      </li>
    {% endif %}
    {% for i in pages %}
      <li class="page-item {% if page_obj.number == i %}active{% endif %}">
        <a class="page-link" href="{% relative_url i 'page' request.GET.urlencode %}">{{ i }}</a>
      </li>
    {% endfor %}
    {% if page_obj.has_next %}
      <li class="page-item ">
        
        <a class="page-link" href="{% relative_url page_obj.next_page_number 'page' request.GET.urlencode %}">&raquo;</a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1">&raquo;</a>
      </li>
    {% endif %}
  </ul>
</nav>
{% endif %}
<div class="d-flex justify-content-center">
  <span class="current">
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
  </span>
  </div>
  </div>

</main>
{% endblock %}
